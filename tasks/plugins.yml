---
- name: Ensure plugins folder.
  file:
    path: "{{ sonar_plugins_dir }}"
    state: directory

- name: Install Sonar plugins.
  get_url:
    url: "{{ item }}"
    dest: "{{ sonar_plugins_dir }}"
  with_items: "{{Â sonar_plugins_url }}"
  notify: restart sonar

- name: Removes plugins on demand
  file:
    path: "{{ sonar_plugins_dir }}/{{ item }}"
    state: absent
  with_items:
    - "{{ plugins_to_remove }}"
